APS 排产系统（四大工艺、辆/班）详细设计补充：Use Case + 引擎规则细化 + 原型级页面说明（Ant Design）
说明  
● 本文不再写数据表与接口。  
● 角色：管理员（admin）、用户（user）。  
● 排产粒度：天-班次（辆/班）。  
● 四大工艺：冲压→焊装→涂装→总装。  
● 用例描述统一包含：前置条件、主流程、异常流程、校验与提示语（前端）。

A. 各模块详细用例（Use Case）
用例编号规则：模块-编号，例如 AUTH-01。

A1. 登录与首页
AUTH-01 登录
页面/按钮：登录页「登录」按钮
参与者：user/admin
前置条件：账号存在且启用
主流程
1. 用户输入用户名、密码
2. 点击「登录」
3. 系统校验账号密码
4. 登录成功，跳转首页；拉取当前用户信息与菜单（按角色）
   异常流程
   ● E1：用户名或密码错误 → 提示「用户名或密码错误」
   ● E2：账号被禁用 → 提示「账号已禁用，请联系管理员」
   ● E3：网络异常 → 提示「网络异常，请稍后重试」
   校验与提示语
   ● 用户名/密码必填；密码最少6位（建议）
   ● 登录成功提示可省略（直接跳转）

AUTH-02 退出登录
入口：顶部头像菜单「退出」
参与者：user/admin
前置条件：已登录
主流程
1. 点击退出
2. 清理本地 token（及缓存字典）
3. 跳转登录页
   异常流程
   ● E1：后端退出失败（可忽略）→ 仍清理本地并退出
   提示语：二次确认「确认退出登录？」

A2. 字典与系统配置
SYS-01 字典查询（前端启动加载）
入口：应用启动后后台加载字典（无按钮）
参与者：user/admin
前置条件：已登录
主流程
1. 前端拉取常用字典：订单状态、工艺类型、异常类型等
2. 缓存到内存（可选本地存储）
   异常流程
   ● E1：拉取失败 → 降级：页面用硬编码枚举或提示「字典加载失败」
   提示语：不弹窗，顶部轻提示即可

SYS-02 系统参数维护（管理员）
页面/按钮：系统配置页「编辑」「保存」
参与者：admin
前置条件：管理员登录
主流程
1. 进入系统配置页面
2. 点击某配置「编辑」，修改值
3. 点击「保存」
4. 保存成功，刷新列表
   异常流程
   ● E1：参数格式不合法 → 提示具体字段（如「超时必须为正整数」）
   ● E2：并发修改冲突 → 提示「配置已被他人更新，请刷新后重试」
   关键校验
   ● 关键参数如 engineTimeoutMs、defaultWeights 格式校验

A3. 主数据：车型/物料/BOM/工艺路线/资源/规则
MD-MODEL-01 车型新增
页面/按钮：车型列表页「新建」
参与者：admin
前置条件：管理员登录
主流程
1. 点击「新建」
2. 弹窗输入：车型编码、名称、平台、状态
3. 点击「确定」
4. 创建成功，列表刷新
   异常流程
   ● E1：车型编码重复 → 提示「车型编码已存在」
   ● E2：必填缺失 → 表单提示
   校验与提示语
   ● modelCode 必填、仅字母数字-_
   ● 成功提示「创建成功」

MD-ITEM-01 物料新增/编辑
页面/按钮：物料列表页「新建」「编辑」
参与者：admin
主流程：同车型新增
异常流程
● E1：编码重复
● E2：物料类型未选
校验
● 数量/单位等无；仅基础字段校验

MD-BOM-01 BOM版本创建
页面/按钮：BOM列表页「新建版本」
参与者：admin
前置条件：车型已存在
主流程
1. 选择车型、输入版本号、生效日期、状态
2. 创建成功后进入BOM详情页
   异常流程
   ● E1：版本号冲突（同车型同版本）→ 提示「该车型版本已存在」
   ● E2：生效区间冲突（可选严格）→ 提示「生效区间与现有版本重叠」
   校验
   ● effectiveFrom <= effectiveTo（若有）
   ● 建议支持“effectiveTo 为空=长期有效”

MD-BOM-02 导入BOM明细（覆盖/追加）
页面/按钮：BOM详情页「导入」「覆盖导入/追加导入」
参与者：admin
前置条件：BOM主表存在
主流程
1. 下载模板（可选）
2. 上传Excel/CSV
3. 选择导入模式：覆盖/追加
4. 解析预览（显示成功/失败行）
5. 确认导入
6. 导入成功，刷新BOM树
   异常流程
   ● E1：文件格式错误 → 提示「模板不匹配」
   ● E2：存在非法物料编码 → 提示并给出行号
   ● E3：形成父子循环 → 提示「BOM存在循环引用」
   校验
   ● qty>0；levelNo>=1
   ● itemCode 必须存在于物料主数据

MD-ROUTE-01 路线创建（四大工艺）
页面/按钮：工艺路线页「新建」
参与者：admin
前置条件：车型存在
主流程
1. 选择车型、工艺类型、版本号
2. 保存
3. 进入路线详情，维护工序
   异常流程
   ● E1：同车型同工艺同版本已存在 → 提示
   校验
   ● 工艺类型必选（1~4）

MD-ROUTE-02 工序维护（新增/排序/编辑）
页面/按钮：路线详情页「新增工序」「保存排序」「编辑」
参与者：admin
前置条件：路线存在
主流程
1. 新增工序：填写编码、名称、seq、工时、setup、站组、约束JSON
2. 保存后显示在工序表格中
3. 支持拖拽/上下移动调整顺序（可选：通过 seq_no 实现）
   异常流程
   ● E1：opCode重复 → 提示
   ● E2：seqNo冲突 → 提示「顺序号已存在」
   ● E3：约束JSON非合法JSON → 提示「请输入合法JSON」
   校验
   ● seqNo为整数；建议间隔10方便插入

MD-RES-01 资源维护（车间/产线/工位/设备/工装/人力组）
页面/按钮：资源管理页面各Tab「新建」「编辑」「禁用」
参与者：admin
主流程
● 新建产线：选择车间、工艺类型、编码名称
● 新建工位：选择产线、设置默认班次产能（辆/班）
● 新建设备：选择工位、编码名称
● 新建工装：类型/编码/名称；并维护绑定关系
异常流程
● E1：编码重复
● E2：工位产能非正整数 → 提示
校验
● 产线工艺类型与车间工艺（若配置）一致，否则提示「工艺类型不一致」

MD-RULE-01 换型矩阵维护（颜色/模具切换）
页面/按钮：规则配置页「新增矩阵」「批量导入」
参与者：admin
前置条件：定义好 from_key/to_key 的编码体系（如颜色编码、模具编码）
主流程
1. 选择工艺类型（涂装/冲压最常用）
2. 填写 from_key、to_key、切换分钟、成本
3. 保存
   异常流程
   ● E1：同工艺from→to重复 → 提示「已存在该切换规则」
   校验
   ● setup_minutes>=0；setup_cost>=0

A4. 日历（按天/班次）
CAL-01 批量设置工作日/休息日
页面/按钮：日历配置页「批量设置」
参与者：admin
前置条件：产线存在
主流程
1. 选择资源类型=产线，选择产线
2. 选择日期范围，选择工作/休息
3. 点击「应用」
4. 日历视图刷新
   异常流程
   ● E1：日期范围过大（如>一年）→ 提示「范围过大，请分段设置」
   校验
   ● fromDate<=toDate

CAL-02 设置班次与产能（辆/班）
页面/按钮：日历配置页某天「编辑班次」
参与者：admin
前置条件：该日为工作日
主流程
1. 点击某天单元格「编辑」
2. 弹窗编辑班次列表：D1/N1（可增删）
3. 输入 start/end、capacityQty
4. 保存
   异常流程
   ● E1：跨夜班次 end_time 小于 start_time → 允许但需标识“跨日”
   ● E2：capacityQty<0 → 表单提示
   校验与提示
   ● 提示语：「容量单位：辆/班」
   ● 若设置为休息日仍配置班次 → 提示「该日为休息日，班次将不生效」

A5. 订单与审批
SO-01 销售订单录入（若前端需要）
页面/按钮：销售订单页「新建」
参与者：user/admin
主流程
1. 输入：订单号、车型、数量、交期、优先级
2. 保存
   异常流程
   ● E1：订单号重复
   校验
   ● qty>0；dueDate必填

PO-01 生产订单创建（含插单/返工）
页面/按钮：生产订单页「新建」
参与者：user/admin
前置条件：车型、BOM、路线版本存在
主流程
1. 填写：订单号、类型(orderKind)、车型、BOM版本、路线版本、数量、交期、优先级
2. （可选）填写订单属性：颜色/模具key/配置
3. 保存为草稿
4. 点击「提交审批」
   异常流程
   ● E1：BOM/路线版本找不到 → 提示「请先维护BOM/路线版本」
   ● E2：qty<=0 → 表单提示
   提示语
   ● 插单：提示「插单将优先排产，可能影响已排计划」

PO-02 订单提交审批
页面/按钮：生产订单详情「提交审批」
参与者：user/admin
前置条件：订单状态=新建
主流程
1. 点击提交审批
2. 系统生成审批任务
3. 订单状态变为“待审批”
   异常流程
   ● E1：订单关键字段缺失 → 提示「请补全BOM/路线/交期等信息」
   ● E2：状态不允许 → 提示「当前状态不允许提交审批」

APPROVE-01 审批通过/驳回
页面/按钮：审批工作台「通过」「驳回」
参与者：admin
前置条件：存在待处理任务
主流程
1. 打开任务详情，查看订单信息
2. 点击通过 → 任务=通过，订单=已审批
3. 或点击驳回 → 填写原因 → 任务=驳回，订单回到新建
   异常流程
   ● E1：任务已处理 → 提示「任务已处理，请刷新」
   校验
   ● 驳回原因必填

A6. 排产中心（任务/方案/甘特图/发布）
SCH-01 创建排产任务
页面/按钮：排产中心「新建任务」
参与者：user/admin
前置条件
● 订单已审批（可排产池有数据）
● 四大工艺产线与日历已配置（至少总装）
主流程
1. 选择排产范围：日期起止、工艺（默认全选1~4）
2. 选择订单：按条件筛选后勾选（支持全选/批量）
3. 设置产线范围：每个工艺选择可用产线（默认全选该工艺所有产线）
4. 设置目标权重：交期/切换/利用率（滑条）
5. 选择规则开关：换模、换色、齐套、维护窗口
6. 点击「创建」
7. 生成任务记录，状态=待运行
   异常流程
   ● E1：未选订单 → 提示「请选择至少1条订单」
   ● E2：日期范围不合法 → 提示
   ● E3：该范围内日历缺失 → 提示「日历未配置：xxx产线」
   校验与提示
   ● 权重和不等于1时：提示「系统将自动归一化」
   ● 若只排某工艺：提示「将不生成其他工艺工单」

SCH-02 运行排产
页面/按钮：任务详情「运行」
参与者：user/admin
前置条件：任务状态=待运行/失败/不可行（允许重试）
主流程
1. 点击运行
2. 状态切换为运行中，显示进度（转圈/日志）
3. 前端轮询任务状态
4. 成功后展示方案列表（至少一个最优方案）
   异常流程
   ● E1：引擎超时/不可用 → 提示「排产引擎繁忙，请稍后重试」
   ● E2：不可行 → 展示不可行原因列表与冲突定位入口
   提示语
   ● 运行中禁止重复点击（按钮disabled）

SCH-03 查看方案与对比
页面/按钮：方案列表点击某方案、或「对比方案」
参与者：user/admin
前置条件：任务成功且有方案
主流程
1. 点击方案 → 甘特图刷新到该方案
2. KPI面板更新：OTD、超期数量、切换次数、负荷率等
3. 如有多方案，勾选2~3个进行对比（表格/雷达图）
   异常流程
   ● E1：方案数据过大加载慢 → 提示「正在加载…」并按日期分页加载
   校验
   ● 对比最多3个（建议）避免图表拥挤

SCH-04 甘特图手动调整（顺序/跨班次/跨产线）
页面/按钮：甘特图拖拽；右键菜单「移到下一班」「置顶」等（可选）
参与者：user/admin
前置条件：方案状态=草稿
主流程
1. 用户拖拽某块到新的位置
2. 前端显示预落点（高亮目标班次）
3. 松手后提交调整
4. 后端校验并返回：
   ○ 成功：更新该块位置 + KPI + 冲突列表
   ○ 失败：返回原因
5. 前端成功则落位，失败则回弹
   异常流程（典型）
   ● E1：目标班次容量不足 → 提示「容量不足，剩余xx辆」
   ● E2：维护窗口冲突 → 提示「目标班次包含维护停机」
   ● E3：跨工艺移动（不允许）→ 提示「不可跨工艺调整」
   校验与提示
   ● 只允许在同工艺下移动（除非你明确允许联动调整）
   ● 批量移动时（多选）：任一失败则整体失败或部分成功（需产品定规则；建议整体失败避免不一致）

SCH-05 发布方案生成工单
页面/按钮：方案页「发布」
参与者：admin（建议只允许管理员发布）
前置条件
● 方案=草稿
● 无致命冲突（或管理员强制发布）
主流程
1. 点击发布，填写发布说明（可选）
2. 系统二次确认：发布后将生成工单，影响执行
3. 发布成功：方案=已发布；生成工单；订单=已排产
4. 前端跳转到工单列表或显示发布结果（工单数）
   异常流程
   ● E1：存在致命冲突 → 提示并阻止发布（可提供“强制发布”开关给管理员）
   ● E2：重复发布（幂等）→ 返回已发布结果并提示「方案已发布」
   提示语
   ● 二次确认文案：「确认发布？发布后将生成四大工艺工单。」

SCH-06 作废方案
页面/按钮：方案页「作废」
参与者：admin
前置条件：方案未发布或允许作废已发布（需严格策略）
主流程
1. 点击作废，填写原因
2. 作废成功：方案=作废
   异常流程
   ● E1：方案已发布且存在已下达/执行工单 → 提示「已有执行数据，禁止作废」
   校验
   ● 原因必填

A7. 执行看板（工单/报工/异常）
WO-01 工单下达
页面/按钮：工单列表行内「下达」
参与者：admin 或 车间用户（若允许）
前置条件：工单状态=待下达
主流程
1. 点击下达
2. 状态变为已下达
3. 写状态历史
   异常流程
   ● E1：状态不允许 → 提示
   提示语：成功后轻提示「已下达」

WO-02 工单开始/暂停/恢复/完工
页面/按钮：工单详情页「开始/暂停/恢复/完工」
参与者：user/admin
前置条件：满足状态机
主流程（开始）
1. 点击开始
2. 状态=执行中
   主流程（暂停/恢复）
3. 执行中点击暂停 → 状态=暂停
4. 暂停点击恢复 → 状态=执行中
   主流程（完工）
5. 点击完工
6. 校验 qty_done >= qty_planned（默认）
7. 状态=完成
   异常流程
   ● E1：完工时完成量不足 → 提示「完成量不足，无法完工」
   ● E2：并发状态变化 → 提示「状态已更新，请刷新」
   提示语
   ● 完工确认：「确认完工？完工后不可再报工。」

WO-03 报工（良品/不良）
页面/按钮：工单详情「新增报工」
参与者：user/admin
前置条件：工单状态=执行中（建议）
主流程
1. 填写报工时间、良品数、不良数、工位（可选）、备注
2. 点击提交
3. 系统累加 qty_done（通常只累加良品；不良单独统计）
4. 刷新工单完成量与报工列表
   异常流程
   ● E1：良品/不良为负 → 表单提示
   ● E2：累计超过计划（若禁止超产）→ 提示「超出计划量」
   校验
   ● qtyGood>=0 qtyBad>=0 且至少一个>0
   ● reportTime 不得晚于当前太多（可选校验）

EXC-01 异常上报
页面/按钮：工单详情「上报异常」
参与者：user/admin
前置条件：工单存在（执行中或已下达也可）
主流程
1. 选择异常类型、等级，填写描述，附加信息（设备/物料等）
2. 提交
3. 异常状态=新建，出现在异常列表与工单详情
   异常流程
   ● E1：描述为空 → 提示「请填写异常描述」
   提示语
   ● 成功提示「异常已上报」

EXC-02 异常处理（接单/关闭）
页面/按钮：异常列表「接单」「关闭」
参与者：admin 或 指定处理人（本系统简化为admin）
前置条件：异常状态=新建/处理中
主流程（接单）
1. 点击接单 → 状态=处理中
   主流程（关闭）
2. 填写处理说明
3. 点击关闭 → 状态=已关闭
   异常流程
   ● E1：已关闭再次操作 → 提示「异常已关闭」
   校验
   ● 关闭说明必填

A8. VIN追溯
VIN-01 批量生成VIN
页面/按钮：生产订单详情「生成VIN」
参与者：admin（建议）
前置条件：订单存在且数量>0；存在 VIN 规则（若系统生成）
主流程
1. 选择规则，输入生成数量（默认=订单数量）
2. 点击生成
3. 生成 VIN 列表并可导出/打印（可选）
   异常流程
   ● E1：规则不存在 → 提示「请先配置VIN规则」
   ● E2：数量超过订单数量（若限制）→ 提示
   提示语
   ● 「VIN已生成：xx条」

VIN-02 VIN追溯查询
页面/按钮：追溯页「查询」
参与者：user/admin
前置条件：VIN存在
主流程
1. 输入VIN
2. 展示 VIN 基本信息、事件时间轴、组件绑定列表、关联工单
   异常流程
   ● E1：VIN不存在 → 提示「未找到该VIN」

A9. 报表驾驶舱
RPT-01 KPI总览查询
页面/按钮：驾驶舱「查询」
参与者：user/admin
前置条件：存在计划/执行数据
主流程
1. 选择日期范围、工艺（可选）
2. 点击查询
3. 展示卡片：计划量、完成量、OTD、负荷率、换型次数
4. 图表联动：按产线/按天趋势
   异常流程
   ● E1：范围无数据 → 空态「暂无数据」
   校验
   ● 日期范围必填，最大范围（如90天）可限制


B. 排产引擎规则更细的业务表达
本部分用于将业务约束转成“引擎可计算模型”。采用“班次桶（Shift Bucket）”作为容量单元。
B1. 核心建模对象
● 订单 O：qty, due_date, priority, order_kind, attrs(color/mold...), model
● 工艺集合 P={冲压,焊装,涂装,总装}（可选子集）
● 产线集合 L_p：每个工艺对应可用产线集合
● 班次桶 B：(process_type, line, biz_date, shift_code, capacity_qty)
● 计划决策变量（简化表达）：
○ 将订单数量分配到多个班次桶：x[o,b] = 分配数量(辆)，整数 ≥0
○ 同一桶内的排序：seq[b]（桶内订单排列，影响换型）
B2. 硬约束（必须满足）
1. 需求守恒（每订单每工艺）
   ○ 若订单需经过工艺 p，则：sum_{b in B(p)} x[o,b] = qty[o]
2. 产能约束
   ○ 对每个班次桶 b：sum_o x[o,b] <= capacity_qty[b]
3. 工艺串联（precedence）
   ○ 设订单 o 在工艺 p 的完成时间为 C[o,p]（按分配到的最后班次桶决定）
   ○ 后工艺开始不得早于前工艺完成 + 缓冲：
   ■ Start[o, p_next] >= C[o,p] + bufferShifts
   ○ 在班次模型中可用“工艺累计进度”方式近似：保证同一天/班次的数量不超前（见B4）
4. 维护窗口
   ○ 若某桶对应资源在该班次不可用，则该桶 capacity=0 或禁止分配
5. 产线适配
   ○ 订单只能分配到其工艺可用产线集合（以及资源可用关系）
   B3. 软约束（允许违反但惩罚）
1. 交期惩罚（Tardiness）
   ○ 定义订单完工时间（建议以总装完成班次为准）C[o,ASSY]
   ○ 延迟天数 lateDays = max(0, C_date - due_date)
   ○ 惩罚项：Penalty_due = Σ_o w_due(o) * lateDays(o)
   ○ 其中 w_due(o) 可基于 priority、order_kind 加权
2. 换型惩罚（Setup Change）
   ○ 同一桶内相邻任务 i->j 若 setup_key 不同，则产生 setup_minutes/setup_cost
   ○ 惩罚项：Penalty_setup = Σ_{line,shift} Σ_{adjacent pairs} setup_cost(i,j)
3. 负荷均衡（Load Balance）
   ○ 对同工艺多产线：惩罚负荷方差
   ○ Penalty_load = Var(load_rate[line]) 或 Σ |load_rate - avg|
4. WIP惩罚（在制品）（可选增强）
   ○ 希望减少前工艺过早生产导致积压：
   ○ Penalty_wip = Σ_o Σ_p gap(C[o,p], Start[o,p_next])
   B4. 工艺串联的“按数量”近似约束（班次桶常用做法）
   为了避免必须精确到分钟的复杂调度，可采用“累计产量约束”：
   ● 定义截至某班次 t（按时间排序）的累计产量：
   ○ Cum[o,p,t] = Σ_{b<=t, b∈B(p)} x[o,b]
   ● 串联约束：
   ○ 对任意 t：Cum[o, p_next, t] <= Cum[o, p, t - bufferShifts]
   解释：后工艺在任意时刻的累计完成量不能超过前工艺在更早时刻的累计完成量（考虑缓冲），从而保证物流节拍串联。
   B5. 优先级与订单类型的作用方式（建议）
   ● 将 priority、order_kind 影响到：
   a. 交期惩罚权重 w_due
   b. 允许插入策略（例如插单允许改变已排但未发布区间）
   ● 权重示例（可配置）：
   ○ 常规：1.0
   ○ 紧急：1.5
   ○ 定制：1.2
   ○ 插单：2.0
   ○ 返工：1.8（或更高）
   B6. 目标函数示例（归一化）
   设三类指标归一化到 0~1：
   ● D = 交期违约度（越小越好）
   ● S = 切换成本度（越小越好）
   ● U = 利用率偏离度（越小越好）
   综合目标：
   ● Minimize: dueDateWeight*D + setupWeight*S + utilizationWeight*U
   KPI输出建议：
   ● otdRate、lateOrderCount、lateQty
   ● setupTimes（换色/换模次数）、setupMinutesTotal
   ● avgLoadRate、maxLoadRate、bottleneckLine


C. 原型级页面说明（Ant Design）
说明：以 Ant Design 组件为基准，给出页面布局、字段、交互、校验与提示语。
页面统一布局：Layout(Header + Sider + Content)；Content 内使用 Tabs/Card/Table。
C1. 登录页
● 组件：Form + Input + Input.Password + Button
● 字段：
○ 用户名（必填）
○ 密码（必填）
● 校验：
○ required
● 提示：
○ 错误提示用 message.error

C2. 首页/工作台
● 组件：Card 指标卡 + Table 待办列表 + Tabs
● 区块：
a. 待审批订单数、待处理异常数、今日工单完成率（卡片）
b. 我的待办审批（表格）
c. 今日排产任务（表格）

C3. 主数据模块（通用列表页模板）
通用布局
● 顶部：筛选区 Form layout="inline" + 操作按钮区（新建/导入/导出）
● 中部：Table（分页）
● 弹窗：Modal + Form（新建/编辑）
通用交互
● 新建/编辑后 message.success("保存成功")
● 删除采用 Popconfirm：「确认删除？删除后不可在列表显示。」

C4. BOM页面（重点）
C4.1 BOM列表页
● 筛选：车型、版本、状态
● Table列：BOM编码、车型、版本、生效期、状态、操作（详情/编辑/停用）
● 操作：新建版本
C4.2 BOM详情页
● 左侧：BOM树（Tree）
● 右侧：明细表（Table）+ 工具栏
○ 工具栏按钮：导入（覆盖/追加）、导出、校验、保存
● 导入交互：
a. Upload 上传
b. 弹窗展示解析结果（成功/失败行）
c. 确认导入
● 校验提示：
○ 「存在未识别物料编码：xxx（第n行）」  
○ 「检测到循环引用，请检查父子关系」

C5. 日历配置页（产线班次）
● 组件：Calendar 或 自定义表格日历 + Drawer/Modal 编辑班次
● 顶部筛选：
○ 工艺类型、车间、产线、月份
● 日历单元格显示：
○ 班次与容量：D1:240 / N1:200
○ 休息日灰底
● 点击某天：
○ 弹出 Drawer：班次列表可增删（Form.List）
● 校验提示：
○ 「容量必须为非负整数」
○ 「该日为休息日，班次将不生效」（黄提示 Alert）

C6. 生产订单页（重点）
C6.1 列表页
● 筛选区字段：
○ 状态、订单类型、工艺版本、交期范围、关键词（订单号/车型）
● Table列（建议）：
○ 订单号、类型、车型、数量、交期、优先级、状态、操作
● 操作按钮：
○ 新建、导入（可选）、导出（可选）
○ 行内：详情、提交审批/取消（按状态显示）
C6.2 详情页
● 上方：订单基本信息 Descriptions
● 下方：Tabs
○ 属性（颜色/模具key等）Table + Modal编辑
○ 审批记录（任务流转）
○ 关联计划/工单（若已排产）
提示语
● 提交审批确认：「确认提交审批？提交后将不可编辑关键字段。」

C7. 审批工作台
● 左侧：Tabs（待办/已办）
● 中部：任务列表 Table
● 右侧：抽屉 Drawer 显示订单详情
● 按钮：
○ 通过（主按钮）
○ 驳回（危险按钮，弹窗要求填写原因）
● 提示：
○ 驳回原因必填：「请输入驳回原因」

C8. 排产中心（重点页面）
C8.1 页面布局
● 顶部：任务操作区
○ 新建任务、运行、复制方案、发布、导出
● 左侧：任务列表（Table或List）
● 中间：甘特图区域（四大工艺 Tabs）
● 右侧：Tabs（KPI/冲突/负荷）
C8.2 新建任务弹窗
● 表单字段：
○ 日期范围（RangePicker，必填）
○ 工艺多选（CheckboxGroup，默认全选）
○ 订单选择（弹窗内嵌Table，可多选）
○ 每工艺产线范围（Select multiple）
○ 权重（Slider * 3）
○ 规则开关（Switch）
● 校验提示：
○ 「请选择至少一条订单」
○ 「请选择排产日期范围」
C8.3 甘特图交互（适配 react-gantt-timeline）
● 必须支持：
○ 拖拽（改变顺序/跨班次/跨产线）
○ 缩放
○ 点击显示 tooltip
● 冲突联动：
○ 右侧冲突点击 → 中间甘特定位并高亮（前端需实现滚动定位）
● 提示：
○ 拖拽失败：message.error("容量不足，剩余xx辆")

C9. 工单执行看板
C9.1 列表页
● 筛选：工艺、产线、日期、班次、状态
● Table列：工单号、订单号、车型、计划量、完成量、达成率、状态、操作
● 行内操作按状态显示：
○ 待下达：下达/作废
○ 已下达：开始
○ 执行中：暂停/报工/完工
○ 暂停：恢复/作废
○ 完成：查看
C9.2 报工弹窗
● 字段：
○ 报工时间（默认当前）
○ 工位（可选下拉）
○ 良品数、不良数
○ 备注
● 校验：
○ 良品/不良非负；至少一个>0
○ 默认禁止超产：超出提示「超出计划量」

C10. 异常管理页
● 筛选：状态、等级、类型、时间范围
● Table列：异常类型、等级、工单号、描述、状态、创建时间、操作
● 操作：
○ 接单（新建→处理中）
○ 关闭（填写处理说明）
● 关闭弹窗：
○ 处理说明必填

C11. VIN追溯页
● 顶部：VIN输入框 + 查询按钮
● 左侧：VIN基本信息 Descriptions
● 右侧：
○ 事件时间轴 Timeline
○ 组件绑定 Table
● 空态：Empty description="未找到该VIN"

结尾：确认点（避免返工）
为确保以上用例/原型落地时不产生歧义，你只需要确认 5 个“产品裁决”：
1. 方案发布权限：是否只允许 admin 发布？（建议是）
2. 拖拽调整范围：是否允许跨产线、跨班次？（我按“同工艺内允许”写的）
3. 超产策略：是否允许工单超产？（建议不允许）
4. 工艺串联严格度：采用“累计产量约束”即可，还是要精确到分钟/工序？（我按累计约束写的）
5. 订单完成口径：以总装完成为准，还是四大工艺全完成？（建议以总装为准）
   你回复这 5 点的选择，我可以把文档再补一份“验收用例+提示语标准化清单”（更适合答辩与验收）。