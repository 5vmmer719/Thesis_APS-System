# å¿«é€Ÿæµ‹è¯•æŒ‡å—

## âœ… è·¯å¾„å·²ä¿®å¤ + è®¤è¯ç™½åå•å·²é…ç½®

æ§åˆ¶å™¨è·¯å¾„å·²ç»ä¿®å¤ï¼Œå¹¶ä¸”å·²å°† gRPC æµ‹è¯•æ¥å£åŠ å…¥è®¤è¯ç™½åå•ï¼Œç°åœ¨å¯ä»¥**æ— éœ€ç™»å½•**ç›´æ¥è®¿é—®ï¼

## ğŸš€ æµ‹è¯•æ­¥éª¤

### 1. ç¡®è®¤åº”ç”¨å·²å¯åŠ¨

æ£€æŸ¥åº”ç”¨æ˜¯å¦åœ¨ 8088 ç«¯å£è¿è¡Œï¼š
```bash
curl http://localhost:8088/api/v1/actuator/health
```

### 2. æµ‹è¯• gRPC å¥åº·æ£€æŸ¥ï¼ˆæ— éœ€ç™»å½•ï¼‰

```bash
curl -X GET "http://localhost:8088/api/v1/grpc-test/health"
```

> **æ³¨æ„**: è¯¥æ¥å£å·²åŠ å…¥è®¤è¯ç™½åå•ï¼Œæ— éœ€ token å³å¯è®¿é—®ã€‚

**æœŸæœ›å“åº”**ï¼ˆå¦‚æœ Rust å¼•æ“æœªå¯åŠ¨ï¼‰:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "connected": false,
    "timestamp": 1706515200000
  }
}
```

**æœŸæœ›å“åº”**ï¼ˆå¦‚æœ Rust å¼•æ“å·²å¯åŠ¨ï¼‰:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "connected": true,
    "timestamp": 1706515200000
  }
}
```

### 3. æµ‹è¯•åŒæ­¥æ±‚è§£ï¼ˆéœ€è¦ Rust å¼•æ“ï¼‰

```bash
curl -X POST "http://localhost:8088/api/v1/grpc-test/test-solve"
```

### 4. æµ‹è¯•å¼‚æ­¥æäº¤ï¼ˆéœ€è¦ Rust å¼•æ“ï¼‰

```bash
# æäº¤ä»»åŠ¡
curl -X POST "http://localhost:8088/api/v1/grpc-test/test-submit-job"

# å“åº”ä¼šè¿”å› jobIdï¼Œä¾‹å¦‚ï¼š
# {"code":0,"message":"success","data":{"jobId":"550e8400-e29b-41d4-a716-446655440000","message":"Job submitted successfully"}}

# ä½¿ç”¨è¿”å›çš„ jobId æŸ¥è¯¢çŠ¶æ€
curl -X GET "http://localhost:8088/api/v1/grpc-test/job-status/550e8400-e29b-41d4-a716-446655440000"
```

### 5. åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡ï¼ˆéœ€è¦ Rust å¼•æ“ï¼‰

```bash
curl -X GET "http://localhost:8088/api/v1/grpc-test/list-jobs?limit=10"
```

## ğŸ“Š ä½¿ç”¨ Swagger UI

è®¿é—®: **http://localhost:8088/api/v1/doc.html**

åœ¨ "gRPC æµ‹è¯•" åˆ†ç»„ä¸‹å¯ä»¥çœ‹åˆ°æ‰€æœ‰æµ‹è¯•æ¥å£ã€‚

## ğŸ”§ è·¯å¾„å’Œè®¤è¯è¯´æ˜

### è·¯å¾„é…ç½®

ç”±äº `application.yml` ä¸­é…ç½®äº†ï¼š
```yaml
server:
  servlet:
    context-path: /api/v1
```

æ‰€ä»¥ï¼š
- **æ§åˆ¶å™¨æ³¨è§£**: `@RequestMapping("/grpc-test")`
- **å®é™…è®¿é—®è·¯å¾„**: `http://localhost:8088/api/v1/grpc-test/health`

### è®¤è¯ç™½åå•

`/grpc-test/**` å·²åŠ å…¥è®¤è¯ç™½åå•ï¼ˆ`WebMvcConfig.java`ï¼‰ï¼Œæ‰€ä»¥ï¼š
- âœ… **æ— éœ€ç™»å½•**å³å¯è®¿é—®æ‰€æœ‰ gRPC æµ‹è¯•æ¥å£
- âœ… æ–¹ä¾¿å¼€å‘å’Œæµ‹è¯•
- âš ï¸ **ç”Ÿäº§ç¯å¢ƒå»ºè®®ç§»é™¤**æ­¤ç™½åå•é…ç½®

## âš ï¸ æ³¨æ„äº‹é¡¹

### å¦‚æœ Rust å¼•æ“æœªå¯åŠ¨

æµ‹è¯•æ¥å£ä¼šè¿”å›ä»¥ä¸‹é”™è¯¯ï¼š

```json
{
  "code": 50002,
  "message": "gRPC è°ƒç”¨å¤±è´¥: UNAVAILABLE: io exception",
  "data": null
}
```

è¿™æ˜¯**æ­£å¸¸çš„**ï¼Œå› ä¸º Java åº”ç”¨æ— æ³•è¿æ¥åˆ° Rust å¼•æ“ã€‚

### å¯åŠ¨ Rust å¼•æ“çš„æ–¹æ³•

```bash
# å‡è®¾ Rust å¼•æ“åœ¨å¦ä¸€ä¸ªç›®å½•
cd /path/to/rust-aps-engine
cargo run --release
```

å¼•æ“å¯åŠ¨åä¼šç›‘å¬ `localhost:50051`ã€‚

## âœ… éªŒè¯æ¸…å•

- [x] ä¿®å¤æ§åˆ¶å™¨è·¯å¾„ï¼ˆå»æ‰ `/api/v1` å‰ç¼€ï¼‰
- [x] é…ç½®è®¤è¯ç™½åå•ï¼ˆæ— éœ€ç™»å½•ï¼‰
- [x] é‡æ–°ç¼–è¯‘æˆåŠŸ
- [ ] é‡å¯åº”ç”¨
- [ ] æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£
- [ ] ï¼ˆå¯é€‰ï¼‰å¯åŠ¨ Rust å¼•æ“
- [ ] ï¼ˆå¯é€‰ï¼‰æµ‹è¯•å®Œæ•´çš„ gRPC è°ƒç”¨

## ğŸ“Œ ä½¿ç”¨ Token è®¿é—®å…¶ä»–æ¥å£ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦è®¿é—®å…¶ä»–éœ€è¦è®¤è¯çš„æ¥å£ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ tokenï¼š

```bash
# ä½¿ç”¨æ‚¨çš„ token
TOKEN="eyJhbGciOiJIUzM4NCJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJhZG1pbiIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc2OTcxODQ3MywiZXhwIjoxNzY5NzI1NjczfQ.aIFlpWPAKTnMv3CMja_7rLvxAC0WCW_Hl-9Us5CokZ262rstsri-T3KZkkkJbiAm"

# è®¿é—®éœ€è¦è®¤è¯çš„æ¥å£
curl -X GET "http://localhost:8088/api/v1/some-protected-api" \
  -H "Authorization: Bearer $TOKEN"
```

ä½†æ˜¯ **gRPC æµ‹è¯•æ¥å£ä¸éœ€è¦ token**ï¼

---

**æœ€åæ›´æ–°**: 2026-01-29  
**çŠ¶æ€**: âœ… è·¯å¾„é—®é¢˜å·²ä¿®å¤ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•

